<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Form Vé</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
<div class="container mx-auto p-4">
<!--    <h1 class="text-2xl font-bold mb-4" th:text="${fields.hasErrors()} ? 'Sửa Vé' : 'Thêm Vé'">Form Vé</h1>-->

    <!-- Form để thêm mới (khi ticketDTO.id là null) -->
    <form th:if="${ticketDTO.id} == null" th:action="@{/admin/tickets/add}" method="post" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
        <!-- Trip ID -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="tripId">Trip ID</label>
            <input type="number" name="tripId" id="tripIdNew"  th:field="*{ticketDTO.tripId.id}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <!-- Booker ID -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="bookerId">Booker ID</label>
            <input type="number" name="bookerId" id="bookerIdNew" th:field="*{ticketDTO.bookerId.id}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <!-- Invoice ID -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="invoiceId">Invoice ID</label>
            <input type="number" name="invoiceId" id="invoiceIdNew" th:field="*{ticketDTO.invoiceId.id}" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <!-- Customer Name -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="customerName">Tên Khách Hàng</label>
            <input type="text" name="customerName" id="customerNameNew" th:field="*{ticketDTO.customerName}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <!-- Customer Phone -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="customerPhone">Số Điện Thoại Khách Hàng</label>
            <input type="text" name="customerPhone" id="customerPhoneNew" th:field="*{ticketDTO.customerPhone}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <!-- Seat ID -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="seatId">Seat ID</label>
            <input type="number" name="seatId" id="seatIdNew" th:field="*{ticketDTO.seatId.id}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <!-- QR Code -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="qrCode">QR Code</label>
            <input type="text" name="qrCode" id="qrCodeNew" th:value="*{ticketDTO.qrCode}" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <!-- Ticket Status -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="ticketStatus">Trạng Thái Vé</label>
            <select name="ticketStatus" id="ticketStatusNew" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <option value="BOOKED" th:selected="${ticketDTO.ticketStatus == T(com.example.ticketbooker.Util.Enum.TicketStatus).BOOKED}">BOOKED</option>
                <option value="CANCELLED" th:selected="${ticketDTO.ticketStatus == T(com.example.ticketbooker.Util.Enum.TicketStatus).CANCELLED}">CANCELLED</option>
                <option value="USED" th:selected="${ticketDTO.ticketStatus == T(com.example.ticketbooker.Util.Enum.TicketStatus).USED}">USED</option>
            </select>
        </div>
        <div class="flex items-center justify-between">
            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Thực hiện</button>
            <a href="/admin/tickets" class="inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800">Quay lại</a>
        </div>
    </form>

    <!-- Form để chỉnh sửa (khi ticketDTO.id không null) -->
    <form th:if="${ticketDTO.id} != null" th:action="@{/admin/tickets/update}" method="post" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
        <!-- Trip ID -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="tripId">Trip ID</label>
            <input type="number" name="tripId" id="tripId" th:value="${ticketDTO.tripId.id}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>

        <!-- Booker ID -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="bookerId">Booker ID</label>
            <input type="number" name="bookerId" id="bookerId" th:value="${ticketDTO.bookerId.id}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>

        <!-- Invoice ID -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="invoiceId">Invoice ID</label>
            <input type="number" name="invoiceId" id="invoiceId" th:value="${ticketDTO.invoiceId.id}" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>

        <!-- Customer Name -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="customerName">Tên Khách Hàng</label>
            <input type="text" name="customerName" id="customerName" th:value="${ticketDTO.customerName}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>

        <!-- Customer Phone -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="customerPhone">Số Điện Thoại Khách Hàng</label>
            <input type="text" name="customerPhone" id="customerPhone" th:value="${ticketDTO.customerPhone}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>

        <!-- Seat ID -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="seatId">Seat ID</label>
            <input type="number" name="seatId" id="seatId" th:value="${ticketDTO.seatId.id}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>

        <!-- QR Code -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="qrCode">QR Code</label>
            <input type="text" name="qrCode" id="qrCode" th:value="${ticketDTO.qrCode}" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>

        <!-- Ticket Status -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="ticketStatus">Trạng Thái Vé</label>
            <select name="ticketStatus" id="ticketStatus" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <option value="BOOKED" th:selected="${ticketDTO.ticketStatus == T(com.example.ticketbooker.Util.Enum.TicketStatus).BOOKED}">BOOKED</option>
                <option value="CANCELLED" th:selected="${ticketDTO.ticketStatus == T(com.example.ticketbooker.Util.Enum.TicketStatus).CANCELLED}">CANCELLED</option>
                <option value="USED" th:selected="${ticketDTO.ticketStatus == T(com.example.ticketbooker.Util.Enum.TicketStatus).USED}">USED</option>
            </select>
        </div>

        <div class="flex items-center justify-between">
            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Cập nhật</button>
            <a href="/admin/tickets" class="inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800">Quay lại</a>
        </div>
    </form>
</div>
</body>
</html>